[
 {
  "add_total_row": 0,
  "columns": [],
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Report",
  "filters": [],
  "is_standard": "Yes",
  "javascript": null,
  "json": null,
  "letter_head": null,
  "modified": "2018-12-27 18:10:29.785415",
  "module": "Core",
  "name": "Transaction Log Report",
  "prepared_report": 0,
  "query": null,
  "ref_doctype": "Transaction Log",
  "reference_report": null,
  "report_name": "Transaction Log Report",
  "report_script": null,
  "report_type": "Script Report",
  "roles": [
   {
    "parent": "Transaction Log Report",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "Administrator"
   },
   {
    "parent": "Transaction Log Report",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "System Manager"
   }
  ]
 },
 {
  "add_total_row": 0,
  "columns": [],
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Report",
  "filters": [],
  "is_standard": "Yes",
  "javascript": null,
  "json": null,
  "letter_head": null,
  "modified": "2020-04-17 16:10:30.168312",
  "module": "Website",
  "name": "Website Analytics",
  "prepared_report": 0,
  "query": null,
  "ref_doctype": "Web Page View",
  "reference_report": null,
  "report_name": "Website Analytics",
  "report_script": null,
  "report_type": "Script Report",
  "roles": [
   {
    "parent": "Website Analytics",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "System Manager"
   },
   {
    "parent": "Website Analytics",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "Website Manager"
   }
  ]
 },
 {
  "add_total_row": 1,
  "columns": [],
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Report",
  "filters": [],
  "is_standard": "Yes",
  "javascript": null,
  "json": null,
  "letter_head": null,
  "modified": "2022-10-19 02:59:00.365307",
  "module": "Core",
  "name": "Database Storage Usage By Tables",
  "prepared_report": 0,
  "query": "",
  "ref_doctype": "Error Log",
  "reference_report": null,
  "report_name": "Database Storage Usage By Tables",
  "report_script": null,
  "report_type": "Script Report",
  "roles": [
   {
    "parent": "Database Storage Usage By Tables",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "System Manager"
   }
  ]
 },
 {
  "add_total_row": 0,
  "columns": [],
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Report",
  "filters": [],
  "is_standard": "Yes",
  "javascript": null,
  "json": null,
  "letter_head": "",
  "modified": "2023-01-31 14:53:37.778576",
  "module": "Custom",
  "name": "Audit System Hooks",
  "prepared_report": 0,
  "query": "",
  "ref_doctype": "Property Setter",
  "reference_report": null,
  "report_name": "Audit System Hooks",
  "report_script": null,
  "report_type": "Script Report",
  "roles": [
   {
    "parent": "Audit System Hooks",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "System Manager"
   }
  ]
 },
 {
  "add_total_row": 0,
  "columns": [],
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Report",
  "filters": [],
  "is_standard": "No",
  "javascript": "frappe.query_reports['Stock Balance Report'] = {\n    filters: [{\n        fieldname: 'entry_item',\n        label: __('Item'),\n        fieldtype: 'Data'\n    }]\n};\n\nif (frappe.user.has_role('Production Manager')|| frappe.user.has_role('Store Manager')) {\n\n   var warehouse_filter = {\n        fieldname: 'warehouse',\n        label: __('Warehouse'),\n        fieldtype: 'Link',\n        options: 'Warehouse'\n    };\n\n    // Add get_query function only if the user has the 'Production Manager' role\n    if (frappe.user.has_role('Production Manager')) {\n        warehouse_filter.get_query = function() {\n            return {\n                filters: [\n                    ['Warehouse', 'warehouse_name', 'not in', ['Blend Warehouse', 'Batch Warehouse', 'Store']]\n                ]\n            };\n        };\n    }\n\n    frappe.query_reports['Stock Balance Report'].filters.push(warehouse_filter);\n}\n\n",
  "json": null,
  "letter_head": null,
  "modified": "2024-04-30 14:56:11.946838",
  "module": "Mining",
  "name": "Stock Balance Report",
  "prepared_report": 0,
  "query": null,
  "ref_doctype": "Stock Balance",
  "reference_report": null,
  "report_name": "Stock Balance Report",
  "report_script": "# Get filter values\nitem = filters.get(\"entry_item\")\nwarehouse = filters.get(\"warehouse\")\n\n# Get user profile\nprofile = frappe.db.get_value(\"User\", frappe.session.user, \"role_profile_name\")\n\n# Initialize filters\ndefault_filters = {}\n\n# Apply profile-specific filters\nif profile == \"Purchase Manager\":\n    default_filters = {\n        \"entry_for\": \"Material\",\n        \"warehouse\": \"Store\"\n    }\nelif profile == \"Production Manager\":\n    default_filters = {\n        \"warehouse\": [\"not in\", [\"Blend Warehouse\", \"Batch Warehouse\", \"Store\"]]\n    }\nelif profile == \"Lab Manager\":\n    default_filters = {\n        \"warehouse\": \"Blend Warehouse\",\n        \"entry_for\": \"Blend\"\n    }\n\n# Update filters with user inputs\nif item:\n    default_filters[\"entry_item\"] = item\nif warehouse:\n    default_filters[\"warehouse\"] = warehouse\n\n# Retrieve data based on profile and filters\ndata = frappe.db.get_list(\"Stock Balance\", fields=[\"entry_for\", \"entry_item\", \"warehouse\", \"quantity\", \"rol\"], filters=default_filters)\n\n# Format quantity field based on ROL\nif profile == \"Purchase Manager\":\n    for d in data:\n        quantity_color = \"red\" if (d.get('rol') > 0.0 and d.get('quantity') <= d.get('rol')) else \"green\"\n        quantity_html = f\"<span style='color:{quantity_color}; font-weight:bold'>{d.get('quantity')}</span>\"\n        d['quantity'] = quantity_html\n\n# Define columns for the report\ncolumns = [\n    {\"label\": _(\"<b>Item Type</b>\"), \"fieldname\": \"entry_for\", \"fieldtype\": \"Data\", \"width\": 200},\n    {\"label\": _(\"<b>Item</b>\"), \"fieldname\": \"entry_item\", \"fieldtype\": \"Data\", \"width\": 200},\n    {\"label\": _(\"<b>Warehouse</b>\"), \"fieldname\": \"warehouse\", \"fieldtype\": \"Data\", \"width\": 200},\n    {\"label\": _(\"<b>Quantity</b>\"), \"fieldname\": \"quantity\", \"fieldtype\": \"float\", \"width\": 150}\n]\n\n# Return columns and data\ndata = columns, data\n",
  "report_type": "Script Report",
  "roles": [
   {
    "parent": "Stock Balance Report",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "System Manager"
   },
   {
    "parent": "Stock Balance Report",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "Stock Manager"
   },
   {
    "parent": "Stock Balance Report",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "Purchase Manager"
   },
   {
    "parent": "Stock Balance Report",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "Lab Manager"
   },
   {
    "parent": "Stock Balance Report",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "Production Manager"
   },
   {
    "parent": "Stock Balance Report",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "Store Manager"
   }
  ]
 },
 {
  "add_total_row": 0,
  "columns": [],
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Report",
  "filters": [],
  "is_standard": "Yes",
  "javascript": null,
  "json": "{\"add_total_row\": 0, \"sort_by\": \"DocShare.modified\", \"sort_order\": \"desc\", \"sort_by_next\": null, \"filters\": [], \"sort_order_next\": \"desc\", \"columns\": [[\"name\", \"DocShare\"], [\"user\", \"DocShare\"], [\"share_doctype\", \"DocShare\"], [\"share_name\", \"DocShare\"], [\"read\", \"DocShare\"], [\"write\", \"DocShare\"], [\"share\", \"DocShare\"]]}",
  "letter_head": null,
  "modified": "2017-02-24 20:01:16.232286",
  "module": "Core",
  "name": "Document Share Report",
  "prepared_report": 0,
  "query": null,
  "ref_doctype": "DocShare",
  "reference_report": null,
  "report_name": "Document Share Report",
  "report_script": null,
  "report_type": "Report Builder",
  "roles": [
   {
    "parent": "Document Share Report",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "System Manager"
   }
  ]
 },
 {
  "add_total_row": 0,
  "columns": [],
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Report",
  "filters": [],
  "is_standard": "Yes",
  "javascript": null,
  "json": null,
  "letter_head": null,
  "modified": "2017-04-10 15:04:12.498920",
  "module": "Contacts",
  "name": "Addresses And Contacts",
  "prepared_report": 0,
  "query": null,
  "ref_doctype": "Address",
  "reference_report": null,
  "report_name": "Addresses And Contacts",
  "report_script": null,
  "report_type": "Script Report",
  "roles": [
   {
    "parent": "Addresses And Contacts",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "Sales User"
   },
   {
    "parent": "Addresses And Contacts",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "Purchase User"
   },
   {
    "parent": "Addresses And Contacts",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "Maintenance User"
   },
   {
    "parent": "Addresses And Contacts",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "Accounts User"
   }
  ]
 },
 {
  "add_total_row": 0,
  "columns": [],
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Report",
  "filters": [],
  "is_standard": "Yes",
  "javascript": null,
  "json": null,
  "letter_head": null,
  "modified": "2017-06-21 18:18:50.748793",
  "module": "Desk",
  "name": "ToDo",
  "prepared_report": 0,
  "query": null,
  "ref_doctype": "ToDo",
  "reference_report": null,
  "report_name": "ToDo",
  "report_script": null,
  "report_type": "Script Report",
  "roles": [
   {
    "parent": "ToDo",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "System Manager"
   }
  ]
 },
 {
  "add_total_row": 0,
  "columns": [],
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Report",
  "filters": [],
  "is_standard": "Yes",
  "javascript": null,
  "json": null,
  "letter_head": null,
  "modified": "2018-06-29 15:46:42.805039",
  "module": "Core",
  "name": "Permitted Documents For User",
  "prepared_report": 0,
  "query": null,
  "ref_doctype": "User",
  "reference_report": null,
  "report_name": "Permitted Documents For User",
  "report_script": null,
  "report_type": "Script Report",
  "roles": [
   {
    "parent": "Permitted Documents For User",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "System Manager"
   }
  ]
 }
]